# 模式对比测试指南

## 🎯 三种模式对比

系统现在支持三种 Agent 模式，每种模式都有不同的特点和适用场景。

### 模式概览

| 模式 | 描述 | 适用场景 | 响应速度 | 复杂度 |
|------|------|----------|----------|--------|
| **CLI** | Claude Code CLI 模式 | 文件操作、复杂代码任务 | 中等 | 低 |
| **Team** | GLM Coordinator + 专业 Agents | 多 Agent 协作的复杂任务 | 慢 | 高 |
| **Simple** | 极简协调 Agent + SKILL.md | 日常任务、快速响应 | 快 | 极低 |

## 🚀 快速开始

### 1. 启动服务

```bash
npm run dev
```

### 2. 切换模式

在 QQ 中发送：

```
/mode cli      # 切换到 CLI 模式
/mode team     # 切换到团队模式
/mode simple   # 切换到简单模式
```

或使用中文命令：

```
/模式 cli
/模式 团队
/模式 简单
```

### 3. 测试各种任务

#### 搜索任务
```
搜索 TypeScript 最新版本
```

**推荐模式**: Simple（最快）
- CLI: 需要通过 Claude Code CLI
- Team: 多步推理，较慢
- Simple: 直接执行，最快

#### 代码任务
```
帮我写一个 Python 斐波那契函数
```

**推荐模式**: Team 或 CLI
- CLI: 使用 Claude Code CLI，代码质量高
- Team: GLM-4.7 生成，速度快
- Simple: 适合简单代码

#### 文件操作
```
列出 README.md 文件
```

**推荐模式**: CLI
- CLI: 直接访问文件系统
- Team: 需要通过 Shell Agent
- Simple: 需要配置相应技能

#### 特定工具指定
```
用 tavily 搜索 GitHub 上的 myskills 项目
```

**推荐模式**: Simple
- CLI: 不支持 Tavily
- Team: 有快捷检测，可能被误判
- Simple: 直接使用 Tavily，最可靠

## 📊 运行对比测试

### Windows
```batch
test-modes.bat
```

### Unix/Mac
```bash
npx tsx scripts/test-modes.ts
```

测试报告将保存到 `docs/mode-comparison-report.md`

## 🔧 模式详细说明

### CLI 模式

**优点**:
- 使用本地 Claude Code CLI
- 代码质量最高
- 直接访问文件系统
- 支持所有 Claude Code 功能

**缺点**:
- 需要单独安装 Claude Code CLI
- 响应速度中等
- 网络搜索能力有限

**适用场景**:
- 复杂代码任务
- 需要高质量代码
- 文件系统操作

### Team 模式

**优点**:
- 多 Agent 协作
- 支持复杂推理
- 有记忆和自主学习
- 专业 Agent 各司其职

**缺点**:
- 响应速度较慢
- 可能出现空响应
- 快捷检测可能误判

**适用场景**:
- 需要多步推理的复杂任务
- 需要多个 Agent 协作
- 需要利用历史记忆

### Simple 模式 🆕

**优点**:
- 响应速度最快
- SKILL.md 驱动，易于定制
- 直接执行，结果可靠
- 支持工具指定（如"用 tavily"）

**缺点**:
- 功能相对简单
- 需要手动配置技能

**适用场景**:
- 日常问答
- 网络搜索
- 简单代码生成
- 快速响应需求

## 💡 选择建议

### 根据任务类型选择

| 任务类型 | 推荐模式 | 备选模式 |
|----------|----------|----------|
| 搜索信息 | Simple | Team |
| 代码生成 | CLI | Team |
| 文件操作 | CLI | - |
| 复杂推理 | Team | CLI |
| 快速问答 | Simple | - |

### 根据响应时间要求

| 要求 | 推荐模式 |
|------|----------|
| 最快响应 | Simple |
| 平衡质量和速度 | CLI |
| 最高质量 | Team |

## 🛠️ 自定义技能

Simple 模式使用 SKILL.md 文件定义技能，你可以：

1. **创建新技能**
```bash
# 在 skills/simple/ 目录创建新文件
cp skills/simple/default.md skills/simple/my-skill.md
```

2. **编辑技能**
```markdown
# 我的技能

## 系统提示
你是...

## 规则
- ...
```

3. **自动生效**
重启服务后，技能会自动加载

## 📈 性能对比

基于测试的预期性能：

| 指标 | CLI | Team | Simple |
|------|-----|------|--------|
| **响应时间** | ~2s | ~5s | ~1s |
| **成功率** | 95% | 70% | 90% |
| **Token 使用** | 中 | 高 | 低 |
| **维护成本** | 低 | 高 | 极低 |

## 🐛 已知问题

### Team 模式
- 可能返回空响应
- 快捷检测可能误判用户意图
- ReAct 循环可能超时

### Simple 模式
- 功能相对简单
- 需要手动配置技能

## 🔜 未来计划

- [ ] 添加更多内置技能
- [ ] 优化 Team 模式的响应速度
- [ ] 改进快捷检测逻辑
- [ ] 添加模式自动推荐
