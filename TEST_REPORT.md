# QQ-Claude-Proxy åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: 2026-02-23
**æœåŠ¡ç‰ˆæœ¬**: 1.0.0
**æµ‹è¯•ç±»å‹**: é›†æˆæµ‹è¯• + åŠŸèƒ½æµ‹è¯•

---

## 1. æœåŠ¡å¥åº·æ£€æŸ¥ âœ…

**ç«¯ç‚¹**: `GET /api/health`

```json
{
  "status": "ok",
  "timestamp": "2026-02-23T12:33:39.513Z",
  "uptime_seconds": 257038,
  "pid": 128536,
  "memory": {
    "heap_used_mb": 25.49,
    "heap_total_mb": 28.43,
    "rss_mb": 95.71
  },
  "tasks": {
    "total": 99,
    "running": 0
  },
  "gateway": {
    "host": "127.0.0.1",
    "port": 18789
  }
}
```

**ç»“è®º**: æœåŠ¡è¿è¡Œæ­£å¸¸ï¼Œå†…å­˜å ç”¨åˆç†

---

## 2. Dashboard API ç«¯ç‚¹æµ‹è¯• âœ…

| ç«¯ç‚¹ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `/api/health` | âœ… | å¥åº·æ£€æŸ¥ |
| `/api/config` | âœ… | é…ç½®æŸ¥è¯¢ |
| `/api/agents` | âœ… | Agent åˆ—è¡¨ |
| `/api/skills` | âœ… | æŠ€èƒ½åˆ—è¡¨ |
| `/api/scheduled-tasks` | âœ… | å®šæ—¶ä»»åŠ¡ |
| `/api/scheduled-tasks/stats` | âœ… | ä»»åŠ¡ç»Ÿè®¡ |
| `/api/logs/levels` | âœ… | æ—¥å¿—çº§åˆ« |
| `/api/system/info` | âœ… | ç³»ç»Ÿä¿¡æ¯ |

---

## 3. Agent ç³»ç»Ÿæµ‹è¯• âœ…

### 3.1 å·²æ³¨å†Œ Agents (8 ä¸ª)

1. **CodeAgent** - ä»£ç ç”Ÿæˆ
2. **BrowserAgent** - æµè§ˆå™¨æ“ä½œ
3. **ShellAgent** - Shell å‘½ä»¤æ‰§è¡Œ
4. **WebSearchAgent** - ç½‘é¡µæœç´¢
5. **DataAnalysisAgent** - æ•°æ®åˆ†æ
6. **VisionAgent** - å›¾åƒç†è§£
7. **CodeRefactorAgent** - ä»£ç é‡æ„ âœ¨ **æ–°å¢**
8. **SkillManagerAgent** - æŠ€èƒ½ç®¡ç† âœ¨ **æ–°å¢**

### 3.2 åè°ƒå™¨

- **GLMCoordinatorAgent** - ä¸»åè°ƒå™¨
- **TeamCoordinator** - å¤šè¿›ç¨‹å›¢é˜Ÿåè°ƒå™¨ âœ¨ **æ–°å¢**

---

## 4. SkillManagerAgent æµ‹è¯• âœ…

| æµ‹è¯•é¡¹ | å‘½ä»¤ | çŠ¶æ€ |
|--------|------|------|
| åˆ—å‡ºæŠ€èƒ½ | `åˆ—å‡ºæŠ€èƒ½` | âœ… |
| æœç´¢æŠ€èƒ½ | `æœç´¢æŠ€èƒ½ ä»£ç ` | âœ… |
| æ— æ•ˆå‘½ä»¤å¤„ç† | `å®‰è£…æŠ€èƒ½` (æ—  URL) | âœ… |
| canHandle æ–¹æ³• | å¤šç§æ¶ˆæ¯ç±»å‹ | âœ… |
| Agent é…ç½® | ä¼˜å…ˆçº§ã€è¶…æ—¶ç­‰ | âœ… |

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ“¦ æŠ€èƒ½åˆ—è¡¨

æš‚æ— å·²å®‰è£…çš„æŠ€èƒ½ã€‚

å®‰è£…æŠ€èƒ½ç¤ºä¾‹ï¼š
  å®‰è£…æŠ€èƒ½ https://github.com/.../SKILL.md
```

---

## 5. TeamCoordinator æµ‹è¯• âœ…

| æµ‹è¯•é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| åˆå§‹åŒ– | âœ… | æˆåŠŸåˆ›å»ºå­ Agent |
| Agent é…ç½® | âœ… | ä¼˜å…ˆçº§ 90, è¶…æ—¶ 300s |
| canHandle æ–¹æ³• | âœ… | æ­£ç¡®è¯†åˆ« /team å‘½ä»¤ |
| å¤„ç†å›¢é˜Ÿå‘½ä»¤ | âœ… | `/team status` è¿”å›æ­£ç¡® |
| æ¸…ç†èµ„æº | âœ… | æ­£ç¡®åœæ­¢å­è¿›ç¨‹ |

**è¾“å‡ºç¤ºä¾‹**:
```
Team Coordinator Status:

Agents:
  test-worker-1:
    Status: starting
    Completed: 0
    Errors: 0
    Last Activity: 2026-02-23T12:36:20.094Z

Tasks:
  Total: 0
  Running: 0
```

---

## 6. Bug ä¿®å¤ ğŸ›

### 6.1 TeamCoordinator æ¸…ç†æ–¹æ³•

**é—®é¢˜**: `stopAgent` æ–¹æ³•åœ¨è¿›ç¨‹é€€å‡ºåè®¿é—® `instance.process.pid` å¯¼è‡´ `TypeError`

**ä¿®å¤**: åœ¨è¿›ç¨‹ kill å‰ä¿å­˜ PID å¼•ç”¨

```diff
- if (instance.process.pid) {
+ const pid = instance.process.pid;
  ...
+ if (pid) {
```

---

## 7. ç³»ç»Ÿä¿¡æ¯ âœ…

```
ç‰ˆæœ¬: 1.0.0
åç§°: qq-claude-proxy
Node: v24.13.0
å¹³å°: win32 (x64)
è¿è¡Œæ—¶é—´: 71+ å°æ—¶
è°ƒåº¦å™¨: å¯ç”¨ (æœ€å¤§å¹¶å‘: 5)
å®šæ—¶ä»»åŠ¡: 1 ä¸ªå‘¨æœŸæ€§ä»»åŠ¡
```

---

## 8. æ–°å¢åŠŸèƒ½æ‘˜è¦

### 8.1 CodeRefactorAgent
- ä»£ç é‡æ„åˆ†æ
- è‡ªåŠ¨åº”ç”¨é€‰é¡¹
- å¤‡ä»½æ”¯æŒ
- æ–‡ä»¶å¤§å°é™åˆ¶

### 8.2 SkillManagerAgent
- è¿œç¨‹æŠ€èƒ½å®‰è£… (URL)
- æŠ€èƒ½å¯ç”¨/ç¦ç”¨
- æŠ€èƒ½æœç´¢
- æŠ€èƒ½å¸è½½

### 8.3 TeamCoordinator
- çœŸæ­£çš„å¤šè¿›ç¨‹æ¶æ„
- è¿›ç¨‹é—´é€šä¿¡ (stdin/stdout)
- ä»»åŠ¡åˆ†å‘å’Œæ”¶é›†
- æ•…éšœæ¢å¤å’Œè‡ªåŠ¨é‡å¯

### 8.4 Watchdog
- è¿›ç¨‹ç›‘æ§
- å¥åº·æ£€æŸ¥
- è‡ªåŠ¨é‡å¯
- å†…å­˜ç›‘æ§

---

## 9. æµ‹è¯•ç»“è®º

âœ… **æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡**

- æœåŠ¡ç¨³å®šè¿è¡Œ
- API ç«¯ç‚¹æ­£å¸¸å“åº”
- Agent ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- æ–°åŠŸèƒ½å®Œæ•´é›†æˆ

---

## 10. ä½¿ç”¨ç¤ºä¾‹

### 10.1 é€šè¿‡ QQ Bot ç®¡ç†æŠ€èƒ½

```
ç”¨æˆ·: åˆ—å‡ºæŠ€èƒ½
Bot: ğŸ“¦ æŠ€èƒ½åˆ—è¡¨ (å…± X ä¸ªï¼Œå·²å¯ç”¨ Y ä¸ª)...

ç”¨æˆ·: å®‰è£…æŠ€èƒ½ https://example.com/SKILL.md
Bot: âœ… æŠ€èƒ½å®‰è£…æˆåŠŸï¼...

ç”¨æˆ·: å¯ç”¨æŠ€èƒ½ my-skill
Bot: âœ… æŠ€èƒ½ "my-skill" å·²å¯ç”¨
```

### 10.2 é€šè¿‡ Dashboard ç®¡ç†

è®¿é—® `http://localhost:8080` æŸ¥çœ‹ï¼š
- ä»»åŠ¡ç›‘æ§
- å®šæ—¶ä»»åŠ¡ç®¡ç†
- ç³»ç»Ÿé…ç½®
- æ—¥å¿—æŸ¥çœ‹
- æŠ€èƒ½ç®¡ç†
- Agent çŠ¶æ€

---

**æµ‹è¯•å®Œæˆæ—¶é—´**: 2026-02-23 20:36:25
